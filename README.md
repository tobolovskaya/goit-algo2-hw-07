# –î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è 1: –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–∞–Ω–∏—Ö –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é LRU-–∫–µ—à—É

## –û–ø–∏—Å –∑–∞–≤–¥–∞–Ω–Ω—è
–¶—è –ø—Ä–æ–≥—Ä–∞–º–∞ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –æ–±—Ä–æ–±–∫–∏ –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ –º–∞—Å–∏–≤—É —á–∏—Å–µ–ª –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **LRU-–∫–µ—à—É**. –í–æ–Ω–∞ –¥–æ–∑–≤–æ–ª—è—î —à–≤–∏–¥–∫–æ –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏ —Å—É–º—É –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ —Ç–∞ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –º–∞—Å–∏–≤—É –∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º–∏ –≤–∏—Ç—Ä–∞—Ç–∞–º–∏ —á–∞—Å—É.

## –û—Å–Ω–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å
–ü—Ä–æ–≥—Ä–∞–º–∞ –ø—Ä–∞—Ü—é—î –∑ –≤–µ–ª–∏–∫–∏–º –º–∞—Å–∏–≤–æ–º —á–∏—Å–µ–ª —ñ –æ–±—Ä–æ–±–ª—è—î –¥–≤–∞ —Ç–∏–ø–∏ –∑–∞–ø–∏—Ç—ñ–≤:
- **Range(L, R)** ‚Äì –æ–±—á–∏—Å–ª–µ–Ω–Ω—è —Å—É–º–∏ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É –º–∞—Å–∏–≤—ñ –Ω–∞ –≤—ñ–¥—Ä—ñ–∑–∫—É **L** –¥–æ **R** –≤–∫–ª—é—á–Ω–æ.
- **Update(index, value)** ‚Äì –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–Ω–∞—á–µ–Ω–Ω—è –º–∞—Å–∏–≤—É –∑–∞ –ø–µ–≤–Ω–∏–º —ñ–Ω–¥–µ–∫—Å–æ–º.

–†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –¥–≤—ñ –≤–µ—Ä—Å—ñ—ó –∫–æ–∂–Ω–æ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó:
1. **–ë–µ–∑ –∫–µ—à—É–≤–∞–Ω–Ω—è**:
   - `range_sum_no_cache(array, L, R)` ‚Äì –æ–±—á–∏—Å–ª—é—î —Å—É–º—É –∑–∞–Ω–æ–≤–æ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É.
   - `update_no_cache(array, index, value)` ‚Äì –æ–Ω–æ–≤–ª—é—î –∑–Ω–∞—á–µ–Ω–Ω—è –±–µ–∑ –≤–ø–ª–∏–≤—É –Ω–∞ –∫–µ—à.

2. **–ó –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º LRU-–∫–µ—à—É**:
   - `range_sum_with_cache(array, L, R)` ‚Äì –∑–±–µ—Ä—ñ–≥–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–∞–ø–∏—Ç—ñ–≤ —É –∫–µ—à—ñ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.
   - `update_with_cache(array, index, value)` ‚Äì –æ–Ω–æ–≤–ª—é—î –º–∞—Å–∏–≤ —ñ –æ—á–∏—â–∞—î –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –∫–µ—à—É.

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ —É–º–æ–≤–∏
- –ú–∞—Å–∏–≤ —Ä–æ–∑–º—ñ—Ä–æ–º **100_000** –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, –∑–∞–ø–æ–≤–Ω–µ–Ω–∏—Ö –≤–∏–ø–∞–¥–∫–æ–≤–∏–º–∏ —á–∏—Å–ª–∞–º–∏.
- **50_000** –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ (`Range` —ñ `Update`).
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **LRU-–∫–µ—à** —ñ–∑ —Ä–æ–∑–º—ñ—Ä–æ–º **1000**.

## –í–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
–ü—Ä–æ–≥—Ä–∞–º–∞ –ø–æ—Ä—ñ–≤–Ω—é—î —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤:
- **–ë–µ–∑ –∫–µ—à—É** ‚Äì –∫–æ–∂–µ–Ω –∑–∞–ø–∏—Ç –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –∑ –Ω—É–ª—è.
- **–ó –∫–µ—à–µ–º** ‚Äì –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω—ñ –∑–∞–ø–∏—Ç–∏ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è –º–∏—Ç—Ç—î–≤–æ.

### –û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥
```
–ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –±–µ–∑ –∫–µ—à—É–≤–∞–Ω–Ω—è: 3.11 —Å–µ–∫—É–Ω–¥
–ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑ LRU-–∫–µ—à–µ–º: 0.02 —Å–µ–∫—É–Ω–¥
```

## –í–∏–º–æ–≥–∏ –¥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
- Python 3.8+
- –ú–æ–¥—É–ª—å `functools.lru_cache`
- –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ `random`
- –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ `time`

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–∏
1. **–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Python** (—è–∫—â–æ —â–µ –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ).
2. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç** —É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ:
   ```sh
   python main.py
   ```
3. **–ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏** ‚Äì —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤ –±–µ–∑ –∫–µ—à—É —Ç–∞ –∑ –Ω–∏–º.

## –ê–≤—Ç–æ—Ä
–†–æ–∑—Ä–æ–±–ª–µ–Ω–æ –¥–ª—è –∫—É—Ä—Å—É "–ê–ª–≥–æ—Ä–∏—Ç–º–∏ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∫–µ—à–µ–º".

## –î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è 2:

## –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è —á–∏—Å–µ–ª –§—ñ–±–æ–Ω–∞—á—á—ñ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º LRU-–∫–µ—à—É —Ç–∞ Splay Tree

### –û–ø–∏—Å –ø—Ä–æ—î–∫—Ç—É
–¶–µ–π –ø—Ä–æ—î–∫—Ç —Ä–µ–∞–ª—ñ–∑—É—î –¥–≤–∞ –ø—ñ–¥—Ö–æ–¥–∏ –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è —á–∏—Å–µ–ª –§—ñ–±–æ–Ω–∞—á—á—ñ:
1. **`fibonacci_lru(n)`** ‚Äì –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `@lru_cache` –¥–ª—è –∫–µ—à—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –æ–±—á–∏—Å–ª–µ–Ω—å.
2. **`fibonacci_splay(n, tree)`** ‚Äì –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **Splay Tree** –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç–∞ —à–≤–∏–¥–∫–æ–≥–æ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –æ–±—á–∏—Å–ª–µ–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å.

–î–∞–ª—ñ –ø—Ä–æ–≤–æ–¥–∏—Ç—å—Å—è –ø–æ—Ä—ñ–≤–Ω—è–ª—å–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –æ–±–æ—Ö –º–µ—Ç–æ–¥—ñ–≤, –≤–∏–º—ñ—Ä—é—î—Ç—å—Å—è —Å–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è, –±—É–¥—É—î—Ç—å—Å—è —Ç–∞–±–ª–∏—Ü—è —Ç–∞ –≥—Ä–∞—Ñ—ñ–∫.

---

## –í–∏–º–æ–≥–∏ –¥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
- Python 3.7+
- –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏:
  - `functools` (–≤–±—É–¥–æ–≤–∞–Ω–∞)
  - `matplotlib`
  - `timeit`

–©–æ–± –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏, –≤–∏–∫–æ–Ω–∞–π—Ç–µ:
```bash
pip install matplotlib
```

---

## –ó–∞–ø—É—Å–∫ –∫–æ–¥—É
1. –°–∫–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –∞–±–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –∫–æ–¥.
2. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç `main.py`:
```bash
python main.py
```

---

## –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
### `fibonacci_lru(n)`
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `@lru_cache` –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –æ–±—á–∏—Å–ª–µ–Ω—å.
- –î–æ–∑–≤–æ–ª—è—î –º–∏—Ç—Ç—î–≤–æ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –≤–∂–µ —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è.
- –ó–∞–±–µ–∑–ø–µ—á—É—î —à–≤–∏–¥–∫—É —Ä–µ–∫—É—Ä—Å—ñ—é –±–µ–∑ –∑–∞–π–≤–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å.

### `fibonacci_splay(n, tree)`
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **Splay Tree** –¥–ª—è –∫–µ—à—É–≤–∞–Ω–Ω—è –æ–±—á–∏—Å–ª–µ–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å.
- –ü—ñ–¥ —á–∞—Å –ø–æ—à—É–∫—É –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ —î –∑–Ω–∞—á–µ–Ω–Ω—è —É –¥–µ—Ä–µ–≤—ñ.
- –Ø–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è —â–µ –Ω–µ –±—É–ª–æ –æ–±—á–∏—Å–ª–µ–Ω–µ ‚Äì —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î –π–æ–≥–æ —Ç–∞ –¥–æ–¥–∞—î –≤ –¥–µ—Ä–µ–≤–æ.
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **—Å–ø–ª–∞–π-—Ä–æ—Ç–∞—Ü—ñ—ó** –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –¥–æ—Å—Ç—É–ø—É.

---

## –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –Ω–∞–±—ñ—Ä –∑–Ω–∞—á–µ–Ω—å `n = [0, 50, 100, ..., 950]`.
- –í–∏–º—ñ—Ä—é—î—Ç—å—Å—è —Å–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–∂–Ω–æ–≥–æ –º–µ—Ç–æ–¥—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `timeit`.
- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤–∏–≤–æ–¥—è—Ç—å—Å—è —É –≤–∏–≥–ª—è–¥—ñ **—Ç–∞–±–ª–∏—Ü—ñ** —Ç–∞ **–≥—Ä–∞—Ñ—ñ–∫–∞**.

### –û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥ —É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ:
```
n         LRU Cache Time (s)       Splay Tree Time (s)
--------------------------------------------------
0         0.00000028               0.00000020
50        0.00000217               0.00000572
100       0.00000164               0.00000532
150       0.00000174               0.00000526
...
```

### –û—á—ñ–∫—É–≤–∞–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫
- **X-–≤—ñ—Å—å**: –∑–Ω–∞—á–µ–Ω–Ω—è `n`.
- **Y-–≤—ñ—Å—å**: —Å–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (—Å–µ–∫—É–Ω–¥–∏).
- **–°–∏–Ω—è –ª—ñ–Ω—ñ—è** ‚Äì `LRU Cache`.
- **–ü–æ–º–∞—Ä–∞–Ω—á–µ–≤–∞ –ª—ñ–Ω—ñ—è** ‚Äì `Splay Tree`.

---

## –í–∏—Å–Ω–æ–≤–∫–∏
‚úÖ **LRU Cache** –ø—Ä–∞—Ü—é—î —à–≤–∏–¥—à–µ, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **—Ö–µ—à—É–≤–∞–Ω–Ω—è** –¥–ª—è –º–∏—Ç—Ç—î–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ –∫–µ—à—É.
‚úÖ **Splay Tree** –¥–æ–∑–≤–æ–ª—è—î **–∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ –∫–µ—à—É–≤–∞–Ω–Ω—è** —Ç–∞ **—É–Ω–∏–∫–∞—Ç–∏ –Ω–µ–æ–±–º–µ–∂–µ–Ω–æ–≥–æ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ**.

üöÄ **LRU-–∫–µ—à ‚Äì —ñ–¥–µ–∞–ª—å–Ω–∏–π –≤–∏–±—ñ—Ä –¥–ª—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å, —Ç–æ–¥—ñ —è–∫ Splay Tree –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—å–æ–≤–∞–Ω–æ–≥–æ –∫–µ—à—É–≤–∞–Ω–Ω—è —É —Å–∫–ª–∞–¥–Ω–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö.**

